# MicroPython and IoT
# ep.11 - Relay, LCD, DHT22

# EP introduction
# Concept - 000830
# Fritzing - 020505
# Coding - 022900
```
from machine import Pin, SoftI2C
from i2c_lcd import I2cLcd
from lcd_api import LcdApi
import time
import dht

relay = Pin(19, Pin.OUT)
relay.value(1)
def relayOn():
    relay.value(0)
def relayOff():
    relay.value(1)

d = dht.DHT22(Pin(23))
time.sleep(2)
def getTemp():
    d.measure()
    temp = d.temperature()
    humid = d.humidity()
    textTemp = f'Temp: {temp:2f} c'
    textHumid = f'Humid: {humid:2f} c'
    return (textTemp, textHumid, temp, humid)
# textTemp, textHumid, temp, humid = getTemp()

i2c = softI2C(scl=Pin(22), sda=Pin(21), freq=100000)
lcd = I2CLcd(i2c, 0x3f, 2, 16)

def showLCD(textTemp, textHumid):
    lcd.clear()
    lcd.putstr(textTemp)
    lcd.move_to(0,1)'
    lcd.putstr(textHumid)

while True:
    textTemp, textHumid, temp, humid = getTemp()
    showLCD(textTemp, textHumid)
    if temp > 30:
        relayOn()
    else:
        relayOff()
    time.sleep(2)
```